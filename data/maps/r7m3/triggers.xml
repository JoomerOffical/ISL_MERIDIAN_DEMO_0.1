<?xml version="1.0" encoding="windows-1251" standalone="yes" ?>
<triggers>

<!--Телепорт в Прибрежье-->
	<trigger Name="triggerExitToMap71" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ToR7M1" />
		<script>
			local Plf = GetPlayerVehicle()
			Plf:SetThrottle( 0 )
			Plf:SetCustomLinearVelocity( 0 )

			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.y = PlfCoor.y + 25*0.74
			PlfCoor.z = PlfCoor.z + 25*0.74

			local b = SpawnMessageBox(197)
			if b == 1 then
				PassToMap("r7m1", "FromR7M3", -1 )

				GetPlayerVehicle():AddModifier( "fuel", "- "..random(0.5*GetPlayerFuel()) )
			else
				SaveAllToleranceStatus(RS_NEUTRAL)

				FlyAround(1, 0, 25, 2, PlfCoor, PlfID, 1, 1 )
				StartCinematic()

				TActivate ("RolikExitToMap71")
				TActivate ("RolikENDExitToMap71")
			end

 		</script>
	</trigger>

	<trigger Name="RolikExitToMap71" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOn")

			RotationPlayerByPoints(CVector(getPos("ToR7M1")), CVector(getPos("FromR7M1")))

			GetPlayerVehicle():SetGamePositionOnGround(CVector(getPos("FromR7M1")))
		</script>
	</trigger>
	
	<trigger Name="RolikENDExitToMap71" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()

			RuleConsole("g_postEffect NoiseOff")

			GetPlayerVehicle():SetGamePositionOnGround(CVector(getPos("FromR7M1")))

			TDeactivate("RolikExitToMap71")

			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()

		</script>
	</trigger>

</triggers>